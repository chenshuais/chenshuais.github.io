# 代码分支

参考了 [Gitflow 工作流](https://nvie.com/posts/a-successful-git-branching-model/)，根据实际情况做了简化。

## 主要分支：
- **master**：上面的代码都是基本稳定的，为线上代码。这里只能从 dev 分支合并。合并时机为全量发布后。
- **dev**：改线上崩溃和做新需求，从这里切新的分支，完成之后都合并到这里。合并时机为测试通过，上线成功后。

## 其他分支：

- dev_需求版本：做新的需求时的分支，如 dev_1.3.1 ，从 dev 分支切出来，开发测试完成后，并且发布成功，需要做以下步骤：
  - 在本分支更新 CHANGELOG 记录。
  - 合并到 dev 分支。
  - 在 dev 分支添加 tag，如 v1.3.1。
  - 在下个版本上线后，删除该分支。
  - 待全量发布后，记得将 dev 合并到 master 上。
- dev_fix_需求版本：修改线上崩溃，如 dev_fix_1.3.1，从 dev 分支切出来。修改完成后，并且发布成功，需要做以下步骤：
  - 在本分支更新 CHANGELOG 记录。
  - 合并到 dev 分支。
  - 在 dev 分支添加 tag，如 v1.3.1.a。
  - 在下个版本上线后，删除该分支。
  - 待全量发布后，记得将 dev 合并到 master 上。

## 版本记录更新负责人

谁最后打包发版，谁负责做这件事

## 附录

Android Studio Git 添加 tag 的方法：

- 在需要打 tag 的提交记录上右键
`Gmeek-html<img src="https://blog-image.ian2018.cn/images/1ff999e7cde058fe5a2f813ef6755fd76103b6fb.png">`
- 选择 New Tag

# 版本记录

每次发新版本前，都要做好版本记录，更新代码项目里的 CHANGELOG.md 文件，主要记录的内容有：
- 新的需求
- 修改了哪些重大 bug
- 升级公共库版本
- 修改了原来的打点事件
- 优化了哪些东西

版本记录示例：
```markdown
# 版本记录

### [1.3.2 - 30]

2022-10-12 19:56

- XXX
    - XXX 

### [1.3.1 - 29]

2022-09-19 20:01

- XXX
    - XXX 
```

<!-- ##{"timestamp":1661397849}## -->